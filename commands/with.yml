name: with
description: |-
  Creates a [[With Type]] that is used inside a [[do]] construct in order to execute code inside a given namespace.
  {{Feature|important|To avoid the below-mentioned issue error (whether in [[Scheduler#Scheduled Environment|scheduled]] or [[Scheduler#Unscheduled Environment|unscheduled]] environment) use [[setVariable]]/[[getVariable]] with the desired [[Namespace]].}}
problem_notes:
- "When used in a do-construct in scripts with allowed suspension, a namespace switching might unexpectedly occur inside some scopes ([[for]], [[if]], [[try]], [[call]]) started in a [[Scheduler#Scheduled Environment|scheduled]] environment after small suspension if [[with]] was not the main scope; however, the issue does not arise if [[with]] is used in the parent scope:\n{{{!}} class=\"wikitable\"\n! namespace switch risk\n! namespace switch safe\n{{!}}-\n{{!}}\n<sqf>] spawn\n{\n\twith uiNamespace do\n\t{\n\t\tfor \"_i\" from 1 to 1 do \n\t\t{\n\t\t\tsystemChat str [\n\t\t\t\tcurrentNamespace isEqualTo uiNamespace, \n\t\t\t\tcurrentNamespace isEqualTo missionNamespace\n\t\t\t];\n\t\t\t// result [true, false]\n\t\t\tsleep 0.05; // <-- small suspension\n\t\t\tsystemChat str [\n\t\t\t\tcurrentNamespace isEqualTo uiNamespace, \n\t\t\t\tcurrentNamespace isEqualTo missionNamespace\n\t\t\t];\n\t\t\t// result [false, true] <-- switching\n\t\t};\n\t};\n};\n</sqf>\n{{!}}\n<sqf>\nwith uiNamespace do\n{\n\t[] spawn\n\t{\n\t\tfor \"_i\" from 1 to 1 do \n\t\t{\n\t\t\tsystemChat str [\n\t\t\t\tcurrentNamespace isEqualTo uiNamespace, \n\t\t\t\tcurrentNamespace isEqualTo missionNamespace\n\t\t\t];\n\t\t\t// result [true, false]\n\t\t\tsleep 0.05; // <-- small suspension\n\t\t\tsystemChat str [\n\t\t\t\tcurrentNamespace isEqualTo uiNamespace, \n\t\t\t\tcurrentNamespace isEqualTo missionNamespace\n\t\t\t];\n\t\t\t// result [true, false] <-- NO switching\n\t\t};\n\t};\n};\n</sqf>\n{{!}}}"
groups:
- Program Flow
- Namespaces
syntax:
- call: !Unary namespace
  ret:
  - WithType
  - null
  params:
  - name: namespace
    type: Namespace
argument_loc: Unspecified
effect_loc: Unspecified
since:
  arma_2:
    major: 1
    minor: 0
  arma_2_arrowhead:
    major: 1
    minor: 50
  take_on_helicopters:
    major: 1
    minor: 0
  arma_3:
    major: 0
    minor: 50
examples:
- _myWithType = with uiNamespace;
- with missionNamespace do { global = global + 1 };
