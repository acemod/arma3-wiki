name: with
desc: |-
  Creates a [[With Type]] that is used inside a [[do]] construct in order to execute code inside a given namespace.
  {{Feature|important|To avoid the below-mentioned issue error (whether in [[Scheduler#Scheduled Environment|scheduled]] or [[Scheduler#Unscheduled Environment|unscheduled]] environment) use [[setVariable]]/[[getVariable]] with the desired [[Namespace]].}}
problem_notes:
- "When used in a do-construct in scripts with allowed suspension, a namespace switching might unexpectedly occur inside some scopes ([[for]], [[if]], [[try]], [[call]]) started in a [[Scheduler#Scheduled Environment|scheduled]] environment after small suspension if [[with]] was not the main scope; however, the issue does not arise if [[with]] is used in the parent scope:\n{{{!}} class=\"wikitable\"\n! namespace switch risk\n! namespace switch safe\n{{!}}-\n{{!}}\n<sqf>\n0 spawn\n{\n\twith uiNamespace do\n\t{\n\t\tfor \"_i\" from 1 to 1 do \n\t\t{\n\t\t\tsystemChat str [\n\t\t\t\tcurrentNamespace isEqualTo uiNamespace, \n\t\t\t\tcurrentNamespace isEqualTo missionNamespace\n\t\t\t];\n\t\t\t// result [true, false]\n\t\t\tsleep 0.05; // <-- small suspension\n\t\t\tsystemChat str [\n\t\t\t\tcurrentNamespace isEqualTo uiNamespace, \n\t\t\t\tcurrentNamespace isEqualTo missionNamespace\n\t\t\t];\n\t\t\t// result [false, true] <-- switching\n\t\t};\n\t};\n};\n</sqf>\n{{!}}\n<sqf>\nwith uiNamespace do\n{\n\t0 spawn\n\t{\n\t\tfor \"_i\" from 1 to 1 do \n\t\t{\n\t\t\tsystemChat str [\n\t\t\t\tcurrentNamespace isEqualTo uiNamespace, \n\t\t\t\tcurrentNamespace isEqualTo missionNamespace\n\t\t\t];\n\t\t\t// result [true, false]\n\t\t\tsleep 0.05; // <-- small suspension\n\t\t\tsystemChat str [\n\t\t\t\tcurrentNamespace isEqualTo uiNamespace, \n\t\t\t\tcurrentNamespace isEqualTo missionNamespace\n\t\t\t];\n\t\t\t// result [true, false] <-- NO switching\n\t\t};\n\t};\n};\n</sqf>\n{{!}}}"
groups:
- Program Flow
- Namespaces
syntax:
- call: !Unary namespace
  ret:
    type: WithType
  right: !Item
    name: namespace
    type: Namespace
argument_loc: Unspecified
effect_loc: Unspecified
since:
  arma2: '1.0'
  arma2oa: '1.50'
  tkoh: '1.0'
  arma3: '0.50'
examples:
- <sqf>_myWithType = with uiNamespace;</sqf>
- <sqf>with missionNamespace do { global = global + 1 };</sqf>
see_also:
- missionNamespace
- uiNamespace
- parsingNamespace
- currentNamespace
