name: atan2
desc: |-
  [[File:atan.jpg|right|300px]] ArcTangent of ''y/x''. Used to determine the angle of a vector ''[y,x]''. Result in [[Number#Degrees|Degrees]] between -180 and 180.
  {{Feature|informative|This command can handle ''x'' being 0, unlike when using [[atan]], and will return 90}}
  {{Feature|important|
  This command has [[SQF Syntax#Rules of Precedence|higher precedence]] than the [[select]] command, therefore beware of the case below:
  <sqf notrim>
   _pos select 0  atan2 (_pos select 1) // error
  (_pos select 0) atan2 (_pos select 1) // OK
  </sqf>

  Alternatively, consider using the [[a hash b|#]] operator: <sqf inline>_pos # 0 atan2 _pos # 1</sqf>
  }}
groups:
- Math - Geometry
syntax:
- ret:
    type: Number
  left: !Item
    name: y
    type: Number
  right: !Item
    name: x
    type: Number
argument_loc: Unspecified
effect_loc: Unspecified
since:
  flashpoint: '1.0'
  flashpoint_elite: '1.0'
  arma1: '1.0'
  arma2: '1.0'
  arma2oa: '1.50'
  tkoh: '1.0'
  arma3: '0.50'
examples:
- |-
  <sqf>
  _yx = [5,3];
  _degrees = (_yx select 0) atan2 (_yx select 1); // 59.0362
  </sqf>
- |-
  Get direction from _obj1 to _obj2:
  <sqf>
  _vd = getPosASL _obj2 vectorDiff getPosASL _obj1;
  _dir = (_vd select 0) atan2 (_vd select 1); // _dir range from -180 to +180
  _dir = (_dir + 360) % 360; // _dir range from 0 to 360
  </sqf>
- |-
  Get relative direction from _obj1 to _obj2:
  <sqf>
  _yx = _obj1 worldToModel getPosASL _obj2;
  _dir = (_yx select 0) atan2 (_yx select 1); // _dir range from -180 to +180
  _dir = (_dir + 360) % 360; // _dir range from 0 to 360
  </sqf>
see_also:
- atan
- tan
- sin
- cos
- asin
- acos
- rad
- pi
- vectorCos
- BIS_fnc_dirTo
- getRelPos
- getRelDir
