name: selectionVectorDirAndUp
description: Searches for selection in the object model's LOD level, and returns the Direction and Up vectors in model space.
groups:
- Object Manipulation
syntax:
- call: !Binary
  - object
  - - selectionName
    - LOD
  ret:
  - Unknown
  - null
  params:
  - name: object
    type: Object
  - name: selectionName
    description: selection name (see [[selectionNames]])
    type: Unknown
  - name: LOD
    description: |-
      the LOD that contains the selection:
      * [[String]] - can be one of:
      ** "Memory"
      ** "Geometry"
      ** "FireGeometry"
      ** "LandContact"
      ** "HitPoints"
      ** "ViewGeometry"
      * [[Number]] - command searches for a LOD with the similar [[LOD resolutions|resolution]] (see [[allLODs]]).
    type: Unknown
argument_loc: Global
effect_loc: Unspecified
since:
  arma_3:
    major: 2
    minor: 6
examples:
- vehicle player selectionVectorDirAndUp ["drivewheel_axis", "FireGeometry"] params ["_axisVectorDir", "_axisVectorUp"];
- "Get the player's barrel end ({{hl|_p1}} being muzzle end's ASL position):<sqf>\nonEachFrame {\n\tprivate _weapon = currentWeapon player;\n\tif (_weapon == \"\") exitWith {};\n\n\t// update weapon info upon weapon switch\n\tif (_weapon != player getVariable [\"last_weapon\", \"?\"]) then\n\t{\n\t\tprivate _cfg = configFile >> \"CfgWeapons\" >> _weapon;\n\t\tprivate _model = getText(_cfg >> \"model\");\n\t\tprivate _simpleObject = createSimpleObject [_model, [0,0,0], true];\n\t\tprivate _offset = _simpleObject selectionPosition [getText (_cfg >> \"muzzlePos\"), \"memory\"];\n\t\t_offset = _offset apply { [_x] };\n\t\tdeleteVehicle _simpleObject;\n\t\tplayer setVariable [\"offset\", _offset];\n\t\tplayer setVariable [\"last_weapon\", _weapon];\n\t\tplayer setVariable [\"proxy\",\n\t\t\t[\n\t\t\t\t\"proxy:\\a3\\characters_f\\proxies\\pistol.001\",\n\t\t\t\t\"proxy:\\a3\\characters_f\\proxies\\weapon.001\",\n\t\t\t\t\"proxy:\\a3\\characters_f\\proxies\\launcher.001\",\n\t\t\t\t\"proxy:\\a3\\characters_f\\proxies\\binoculars.001\"\n\t\t\t] select (([1, 4, 4096] find getNumber (_cfg >> \"type\")) + 1)\n\t\t];\n\t};\n\n\t_offset = player getVariable [\"offset\", []];\n\tprivate _proxy = player getVariable [\"proxy\", \"\"];\n\t// using LOD resolution 1 (and lod index 0) - this is not always reliable\n\t// you should manually check allLODs and find the most suitable LOD (smallest res LOD usually has the best accuracy, but it might be slow too)\n\tplayer selectionVectorDirAndUp [_proxy, 1] params [\"_vy\", \"_vz\"];\n\tprivate _pos = selectionPosition [player, _proxy, 0];\n\tprivate _vx = _vy vectorCrossProduct _vz;\n\n\tprivate _mat = matrixTranspose [_vx, _vy, _vz];\n\t_pos = _pos vectorAdd flatten (_mat matrixMultiply _offset);\n\n\tprivate _p1 = player modelToWorldVisualWorld _pos;\n\tprivate _p2 = _p1 vectorAdd (player vectorModelToWorldVisual (_vx vectorMultiply -1000));\n\tdrawLine3D [ASLToAGL _p1, ASLToAGL _p2, [1,0,0,1]];\n};\n"
