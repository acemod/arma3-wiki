name: diag_captureSlowFrame
description: |-
  [[File:CaptureSlowFrame.jpg|right|200x120px]]
  Opens "capture frame" dialog if current frame exceeds set threshold in seconds. One can indicate to either capture duration of a specific profiling selection or the total duration of the frame.
  The selection names can be obtained by expanding the profiling tree. Clicking on a tree item will highlight the item on the graph and vice versa.
  The GUI also provides method of copying of the displayed data to clipboard. Some of the selections:

  {{{!}} class="wikitable valign-top-row-2" style="margin: 1em auto"
  ! Render
  ! Main Thread
  ! Visualize
  ! Mjob
  {{!}}-
  {{!}}
  * bgD3D
  {{!}}
  * total
  * memAl
  {{!}}
  * visul
  {{!}}
  * Mjob
  {{!}}}

  {{Feature|informative|
  '''Chrome export format''':
  Capturing to file also creates a .trace file, which can be imported into chrome://tracing (in chromium based webbrowsers), or https://ui.perfetto.dev/ <br>
  The same format can be exported by pressing the "COPY ALL" button, in the capture frame UI, with {{Controls|Ctrl}} key being held down.
  }}
groups:
- Diagnostic
- Performance Profiling
syntax:
- call: !Unary
  - section
  - threshold
  - frameSkip
  - toFile
  - continuousCounter
  ret:
  - Nothing
  - null
  params:
  - name: section
    description: case-sensitive
    type: String
  - name: threshold
    description: section duration in seconds. 0 captures always '''IF''' the section you gave as section filter appears inside the given frame. "total" always appears, while "callExt" might not always appear for example
    type: Number
  - name: frameSkip
    description: number of frames to ignore before measuring
    type: Unknown
    since:
      arma_3:
        major: 1
        minor: 18
  - name: toFile
    description: 'if true, doesn''t open UI and writes straight to file. If logging to file, it automatically also outputs a .trace file. Note: even if false it might still force to file if it doesn''t have a UI, like a server or HC'
    type: Boolean
    optional: true
    default: '[[false]]'
    since:
      arma_3:
        major: 2
        minor: 20
  - name: continuousCounter
    description: captures N slow frames. 0 or 1 will only capture one frame - don't set it to negative! Can be aborted by running diag_captureFrame or another captureSlowFrame
    type: Unknown
    since:
      arma_3:
        major: 2
        minor: 20
argument_loc: Unspecified
effect_loc: Unspecified
since:
  arma_2_arrowhead:
    major: 1
    minor: 63
  take_on_helicopters:
    major: 1
    minor: 0
  arma_3:
    major: 1
    minor: 0
examples:
- <sqf>diag_captureSlowFrame ["total", 0.003];</sqf>
- <sqf>diag_captureSlowFrame ["memAl", 0.0001, 30];</sqf>
- <sqf>diag_captureSlowFrame ["total", 0, 0, false, 3];</sqf> Will open the capture ui 3 times
