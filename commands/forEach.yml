name: forEach
description: |-
  Executes the given command(s) on every item of an [[Array]] or a [[HashMap]].
  {{Feature|arma2|Since {{arma2}}, the variable [[Magic Variables#x|_x]] is always [[private]] to the [[forEach]] block so it is safe to nest them (see {{Link|#Example 8}}).}}
groups:
- Program Flow
- Arrays
- HashMap
syntax:
- call: !Binary
  - code
  - array
  ret:
  - Unknown
  - will return the value of last executed statement
  params:
  - name: code
    description: |-
      available variables:
      * {{hl|[[Magic Variables#x|_x]]}}: iterated item
      * {{GVI|arma2oa|1.55|size= 0.75}} {{hl|[[Magic Variables#forEachIndex|_forEachIndex]]}}: item's index
    type: Unknown
  - name: array
    description: the array to iterate over
    type: Unknown
- call: !Binary
  - code
  - hashMap
  ret:
  - Unknown
  - will return the value of last executed statement
  params:
  - name: code
    description: |-
      code applied to each key-value pair - available variables:
      * {{hl|[[Magic Variables#x|_x]]}}: key
      * {{hl|[[Magic Variables#x|_y]]}}: value
      * {{hl|[[Magic Variables#forEachIndex|_forEachIndex]]}}: iteration number
    type: Unknown
  - name: hashMap
    description: the HashMap to iterate over
    type: Unknown
  since:
    arma_3:
      major: 2
      minor: 2
argument_loc: Unspecified
effect_loc: Unspecified
since:
  flashpoint:
    major: 1
    minor: 0
  flashpoint_elite:
    major: 1
    minor: 0
  armed_assault:
    major: 1
    minor: 0
  arma_2:
    major: 1
    minor: 0
  arma_2_arrowhead:
    major: 1
    minor: 50
  take_on_helicopters:
    major: 1
    minor: 0
  arma_3:
    major: 0
    minor: 50
examples:
- |-
  // SQF
  { _x setDamage 1 } forEach units player;
  </sqf>
  <sqs>
  ; SQS
  "_x setDammage 1" forEach units player
  </sqs>
- |
  This command can also easily be used to execute a single command multiple times without respect to the array items - see also [[for]]
  <sqf>
  { player addMagazine "30Rnd_556x45_Stanag" } forEach [1, 2, 3, 4];
  // equivalent to
  for "_i" from 1 to 4 do { player addMagazine "30Rnd_556x45_Stanag" };
- "You can also use multiple commands in the same block:\n<sqf>\n{\n\t_x setCaptive true;\n\tremoveAllWeapons _x;\n\tdoStop _x;\n} forEach units group this;\n"
- |-
  To get the index of a [[forEach]] loop, use [[Magic Variables#forEachIndex|_forEachIndex]]:
  <sqf>{ systemChat str _forEachIndex; } forEach ["a", "b", "c"]; // will return: "0", "1", "2" in systemChat messages
- "Iterating a [[HashMap]]'s [[Magic Variables#forEachIndex|_forEachIndex]]:\n<sqf>\n// shows \"0, k1, v1\", \"1, k2, v2\" in systemChat messages\n{\n\tsystemChat format [\"%1, %2, %3\", _forEachIndex, _x, _y];\n} forEach createHashMapFromArray [\n\t[\"k1\", \"v1\"],\n\t[\"k2\", \"v2\"]\n];\n"
- "[[findIf]] equivalent for [[HashMap]]:\n<sqf>\nprivate _resultKey = {\n\tif (_y isEqualTo \"wantedValue\") exitWith { _x };\n\t\"\"\n} forEach _hashmap;\n"
- |
  Array is edited by reference:
  <sqf>
  _arr1 = [1,2,3];
  _arr2 = [6,7,8];
  _arr3 = [0];
  { _x set [1, "changed"] } forEach [_arr1, _arr2, _arr3];
  // _arr1 = [1, "changed", 3]
  // _arr2 = [6, "changed", 8]
  // _arr3 = [0, "changed"]
- "{\n\tprivate _verticalValue = _x; // needed, otherwise _horizontalValues' _x made this one inaccessible\n\t{\n\t\t[_x, _verticalValue] call TAG_fnc_doSomething;\n\t} forEach _horizontalValues;\n} forEach _verticalValues;\n"
