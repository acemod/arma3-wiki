name: weaponState
description: |-
  Returns the given or currently selected weapon state for unit or vehicle.
  With {{Link|#Syntax 2}}, if no optional arguments are present, currently selected weapon is queried.
  {{Feature|arma3|
  Since {{arma3}} v1.70 this command has been improved and extended:
  * A vehicle's weapon query doesn't need a weapon operator provided the weapon or muzzle is specified in optional param.<br>(keep in mind that by default a vehicle has no weapons selected)
  * Driver turret can now be accessed as well with turret path [-1].
  * Muzzle name is supported as well as weapon name. The command searches for weapon first, then if not found, muzzle is searched for.
  }}
groups:
- Weapons
syntax:
- call: !Unary unit
  ret:
  - !ArraySized
    - - name: weapon
        value: String
        desc: ''
        since: null
      - name: muzzle
        value: String
        desc: ''
        since: null
      - name: firemode
        value: String
        desc: ''
        since: null
      - name: magazine
        value: String
        desc: ''
        since: null
      - name: ammoCount
        value: Number
        desc: ''
        since: null
      - name: roundReloadPhase
        value: Number
        desc: current ammo round reload phase (see [[weaponReloadingTime]])
        since:
          arma_3:
            major: 2
            minor: 6
      - name: magazineReloadPhase
        value: Number
        desc: current magazine reload phase from 1 to 0, 0 - reload complete. &gt; 0 - reload in progress
        since:
          arma_3:
            major: 2
            minor: 6
    - ''
  - null
  params:
  - name: unit
    typ: Object
- call: !Unary
  - vehicle
  - turretPath
  - weapon
  - muzzle
  - firemode
  ret:
  - !ArraySized
    - - name: weapon
        value: String
        desc: ''
        since: null
      - name: muzzle
        value: String
        desc: ''
        since: null
      - name: firemode
        value: String
        desc: ''
        since: null
      - name: magazine
        value: String
        desc: ''
        since: null
      - name: ammoCount
        value: Number
        desc: ''
        since: null
      - name: roundReloadPhase
        value: Number
        desc: current ammo round reload phase (see [[weaponReloadingTime]])
        since:
          arma_3:
            major: 2
            minor: 6
      - name: magazineReloadPhase
        value: Number
        desc: current magazine reload phase from 1 to 0, 0 - reload complete. &gt; 0 - reload in progress
        since:
          arma_3:
            major: 2
            minor: 6
    - ''
  - null
  params:
  - name: vehicle
    typ: Object
  - name: turretPath
    typ: ArrayUnknown
  - name: weapon
    description: (Optional) weapon or muzzle name
    typ: String
    since:
      arma_3:
        major: 1
        minor: 70
  - name: muzzle
    description: (Optional) muzzle name
    typ: String
    since:
      arma_3:
        major: 2
        minor: 8
  - name: firemode
    description: (Optional) firemode name
    typ: String
    since:
      arma_3:
        major: 2
        minor: 8
- call: !Binary
  - unit
  - weaponOrMuzzle
  ret:
  - !ArraySized
    - - name: weapon
        value: String
        desc: ''
        since: null
      - name: muzzle
        value: String
        desc: ''
        since: null
      - name: firemode
        value: String
        desc: ''
        since: null
      - name: magazine
        value: String
        desc: ''
        since: null
      - name: ammoCount
        value: Number
        desc: ''
        since: null
      - name: roundReloadPhase
        value: Number
        desc: current ammo round reload phase (see [[weaponReloadingTime]])
        since:
          arma_3:
            major: 2
            minor: 6
      - name: magazineReloadPhase
        value: Number
        desc: current magazine reload phase from 1 to 0, 0 - reload complete. &gt; 0 - reload in progress
        since:
          arma_3:
            major: 2
            minor: 6
    - ''
  - null
  params:
  - name: unit
    typ: Object
  - name: weaponOrMuzzle
    typ: String
  since:
    arma_3:
      major: 2
      minor: 6
argument_loc: Unspecified
effect_loc: Unspecified
since:
  arma_2_arrowhead:
    major: 1
    minor: 60
  take_on_helicopters:
    major: 1
    minor: 0
  arma_3:
    major: 0
    minor: 50
examples:
- "_wsPlayer = weaponState player;\t\t\t\t\t// [\"arifle_MXC_ACO_F\",\"arifle_MXC_ACO_F\",\"Single\",\"30Rnd_65x39_caseless_mag\",30,0,0]"
- "Query currently selected gunner weapon:\n<sqf>_wsVehicle = weaponState [_apc, [0]];\t\t\t// [\"autocannon_40mm_CTWS\",\"HE\",\"player\",\"60Rnd_40mm_GPR_Tracer_Red_shells\",60,0,0]"
- "_wsVehicle = weaponState [_apc, [0], \"AP\"];\t\t// [\"autocannon_40mm_CTWS\",\"AP\",\"player\",\"40Rnd_40mm_APFSDS_Tracer_Red_shells\",40,0,0]"
- "_wsPlayer = player weaponState \"GL_3GL_F\";\t\t// [\"arifle_MX_GL_ACO_F\",\"GL_3GL_F\",\"Single\",\"1Rnd_HE_Grenade_shell\",1,0,0]"
